<!DOCTYPE HTML>
<html>
<head>
  <title>thumbsget4web</title>
</head>
<body>
    <script type="text/javascript">
        // Some parts of this JS were based on this
        // SO answer:
        // https://stackoverflow.com/a/11219605

        function previewThumbnail() {
            // This is used to preview the thumbnail in
            // the image box below the controls.

            var thumbnailPreviewBox = document.getElementById("thumbnailImageBox");
            thumbnailPreviewBox.src = getThumbnailUrl();


        }

        function getThumbnailUrl() {
            // First we need to define the image box so we can set
            // the preview in it.
            var thumbnailPreviewBox = document.getElementById("thumbnailImageBox");
            var thumbnailUrl = new String(document.getElementById("video_url").value);

            alert("thumbnailUrl.length: " + thumbnailUrl.length);

            // Next, we need to make sure there's stuff in the textbox.
            if (thumbnailUrl.length > 0)
            // Now we can do stuff and replace text.
            {
                // Look at the URL, and replace "www.youtube.com/watch?v=" with "i.ytimg.com/vi/".
                // Actually, first replace "www." with "" (nothing).
                alert("is greater than 0")
                console.info("Start:");
                console.info("Current URL: " + thumbnailUrl);

                // Replace "www." with nothing.
                thumbnailUrl = thumbnailUrl.replace("www.", "");
                console.info("Replace www. Current URL: " + thumbnailUrl);

                // Replace "m." with nothing.
                thumbnailUrl = thumbnailUrl.replace("m.", "");
                console.info("Replace m. Current URL: " + thumbnailUrl);

                // Replace "?feature=youtu.be" with nothing.
                thumbnailUrl = thumbnailUrl.replace("?feature=youtu.be", "");
                console.info("Replace ?feature=youtu.be. Current URL: " + thumbnailUrl);

                // Replace "&feature=youtu.be" with nothing.
                thumbnailUrl = thumbnailUrl.replace("&feature=youtu.be", "");
                console.info("Replace &feature=youtu.be. Current URL: " + thumbnailUrl);

                // Now, if "youtube.com/watch?" is in the URL, replace it and "v=" with "i.ytimg.com/vi/".
                if (thumbnailUrl.includes("youtube.com/watch?"))
                {
                thumbnailUrl = thumbnailUrl.replace("youtube.com/watch?v=", "i.ytimg.com/vi/");
                console.info("Replace youtube.com/watch?v=. Current URL: " + thumbnailUrl);
                } 
                else if (thumbnailUrl.includes("youtu.be/"))
                    {

                // If the URL contains "youtu.be/", replace that with "i.ytimg.com/vi/".
                thumbnailUrl = thumbnailUrl.replace("youtu.be/", "i.ytimg.com/vi/");
                console.info("Replace youtu.be. Current URL: " + thumbnailUrl);
                    }
                // Replace "watch" with nothing.
                thumbnailUrl = thumbnailUrl.replace("watch", "");
                console.info("Replace watch. Current URL: " + thumbnailUrl);

                // Replace "&v=" with nothing.
                thumbnailUrl = thumbnailUrl.replace("&v=", "");
                console.info("Replace &v=. Current URL: " + thumbnailUrl);

                // Once again, replace "youtube.com/" with "i.ytimg.com/vi/".
                thumbnailUrl = thumbnailUrl.replace("youtube.com/", "i.ytimg.com/vi/");
                console.info("Replace youtube.com/. Current URL: " + thumbnailUrl);

                // Add "maxresdefault.jpg" to end of URL.
                thumbnailUrl = thumbnailUrl + "/maxresdefault.jpg"
                console.info("Append /maxresdefault.jpg. Current URL: " + thumbnailUrl);

                // Return the thumbnail URL if the textbox isn't empty and onlyReturnVideoID
                return thumbnailUrl
            } else
                {

            // If the textbox for the video URL is empty, just return the thumbnail of
            // one of my Luigi's Mansion episodes.
            return "https://i.ytimg.com/vi/kK7TJIMab7g/maxresdefault.jpg"
                }
            }
        </script>

   <form>
    <label for:"video_url">Video URL:</label> <input type="text" id="video_url">
    <br>
    <br>
    <input type="button" onclick="saveThumbnail()" value="Save thumbnail...">
    <br>
    <input type="button" onclick="previewThumbnail()" value="Preview thumbnail"> 
   </form>

   <img id="thumbnailImageBox" width="320" src="">
    


</body>
</html>
